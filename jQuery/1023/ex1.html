<!-- test8_2이용하여 첫번째 날짜와 두번째 날짜만 클릭하면 그 사이까지 선택되게, 두번째 날짜가 첫번째 날짜보다
이전의 날짜일경우 선택불가 알림 띄우기 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex1.html</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        .bgColor {
            background-color: rgb(166, 219, 240);
        }
    </style>
    <script>
        'use strict';
 
        let today = new Date();
        let year = today.getFullYear();
        let month = today.getMonth();
        let date = today.getDate();
 
        let cnt = 0;
 
        $(function() {
            let firstDate = 0;
            let lastDate = 0;
 
            let ymd = `${year}-${month+1}-${date}`;
            $('#demo').html(`오늘 날짜 : ${ymd}`);
            
            $('td').click(function() {
                if($(this).hasClass('bgColor') == true) {
                    $(this).removeClass('bgColor');
                    cnt--;
                }
                else {
                    let cellText = eval($(this).text());
                    if(cellText < date) alert("오늘 이전일은 선택할 수 없습니다.");
                    else {                  
                        $(this).addClass('bgColor');
                        cnt++;
                    }
                    if(cnt==1) {
                        firstDate = eval($(this).text());
                        console.log(firstDate);
                    } 
                    else if(cnt==2) {
                        cnt = 0;
                        lastDate = eval($(this).text());
                        console.log(lastDate);
                        let temp=0;
                        if(firstDate > lastDate) {
                            // console.log(lastDate+"last");
                            temp = firstDate;
                            // console.log(temp+"temp");
                            firstDate = lastDate;
                            // console.log(firstDate+"first");
                            lastDate = temp;
                            console.log("f"+firstDate);
                            console.log("L"+lastDate);
                        }
                    }
                    $('#demo').html(`선택된 날짜 : ${firstDate} ~ ${lastDate}`);
                    for(let i=firstDate; i<lastDate; i++) {
                        $('tr td').eq(i).addClass('bgColor');
                    }
                }
            });
        });
    </script>        
</head>
<body>
    <p><br/></p>
    <div class="container">
        <h3>아래의 날짜에서 첫번째와 마지막 날짜를 클릭하면 자동으로 날짜범위가 체크됩니다..</h3>
        <p style="color: gray;">* 오늘 날짜 이전은 선택하실 수 없습니다 *</p>
        <table class="table table-bordered text-center">
            <tr>
                <td class="tdCell">1</td>
                <td class="tdCell">2</td>
                <td class="tdCell">3</td>
                <td class="tdCell">4</td>
                <td class="tdCell">5</td>
            </tr>
            <tr>
                <td class="tdCell">6</td>
                <td class="tdCell">7</td>
                <td class="tdCell">8</td>
                <td class="tdCell">9</td>
                <td class="tdCell">10</td>
            </tr>
            <tr>
                <td class="tdCell">11</td>
                <td class="tdCell">12</td>
                <td class="tdCell">13</td>
                <td class="tdCell">14</td>
                <td class="tdCell">15</td>
            </tr>
            <tr>
                <td class="tdCell">16</td>
                <td class="tdCell">17</td>
                <td class="tdCell">18</td>
                <td class="tdCell">19</td>
                <td class="tdCell">20</td>
            </tr>
            <tr>
                <td class="tdCell">21</td>
                <td class="tdCell">22</td>
                <td class="tdCell">23</td>
                <td class="tdCell">24</td>
                <td class="tdCell">25</td>
            </tr>
            <tr>
                <td class="tdCell">26</td>
                <td class="tdCell">27</td>
                <td class="tdCell">28</td>
                <td class="tdCell">29</td>
                <td class="tdCell">30</td>
            </tr>
        </table>
        <hr/>
        <div id="demo"></div>
    </div>
</body>
</html>
